<style> 
    body {font-size: larger; }
    #output {font-weight: 100;}
    #grid {font-family: monospace;}
    #grid td {width: 1.5em;height: 1.5em;text-align: center;}
    .hovering{background-color: rgb(82, 212, 255);}
    td.between{background-color: blue;}
    .done{background-color: rgb(0, 190, 0);}
    .found{background-color: rgb(0, 190, 0);}
</style>

<main>
this is a word search, to play first figure out the word by looking at your hints. You have to translate the CAPETALIZED from dutch to english your hints are:
<div id="hint"></div>
<div id="output"> </div>
<table id="grid"></table>
</main>
<script> 
    const possibilities = [
        // capetalized spelled wrong
        {hint:"London is de HOOFDSTAD van Engeland.", answer:"capital"},
        {hint:"De klas is in drie groepen VERDEELD.", answer:"split"},
        {hint:"Ik ging om 3 uur in het ochtend naar bed, ik ben MOE.", answer:"tired"},
        {hint:"Het is irritant dat we op deze school geen MUZIEK krijgen.", answer:"music"},
        {hint:"Ik woon op de bovenste VERDIEPING.", answer:"floor"},
        {hint:"Ik hou van bloemen TEKENEN.", answer:"drawing"},
        {hint:"Wij gaan in de vakantie op REIS naar Canada.", answer:"journey"},
        {hint:"Ik kan nooit CONCENTREREN tijdens Frans.", answer:"concentrate"},
        {hint:"Ga jij MEEDOEN aan de basketbaltoernooi.", answer:"participate"},
        {hint:"Ik ben in de race TWINTIGSTE geworden.", answer:"twentieth"},
        {hint:"AARDERIJKSKUNDE is het moeilijkste vak.", answer:"geography"},
        {hint:"Ik GEEF OP. Jij hebt weer gewonnen.", answer:"quit"},
        {hint:"Ik vind de nieuwe TECHNOLOGIE in laptops interresant.", answer:"technology"},
        {hint:"Als ik thuis KLUSJES doe krijg ik wat geld", answer:"chores"},
        {hint:"Ik ben alweer een SCHRIFT kwijt.", answer:"notebook"},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    //    {hint:".", answer:""},
    ]
    const wholePuzzle = []
    for (let i = 0; i < 8; i = i + 1){
        const idx = Math.floor(Math.random()*possibilities.length)
        const [q] = possibilities.splice(idx, 1)
        wholePuzzle.push(q)
    }
    const puzzle = wholePuzzle[0]
    const guess = document.getElementById("guess") 
    const output = document.getElementById("output")
    const hint = document.getElementById("hint")
    hint.innerHTML = wholePuzzle.map(function (p){
        return `<div class="hint" data-ans="${p.answer}">`+p.hint+"</div>"
    }).join("")
    const grid = document.getElementById("grid")
    const size = 16
    for (let i = 0; i < size; i = i+1){ 
        const row = document.createElement("tr")
        row.classList.add("y"+i)
        row.classList.add("y"+(i-size))

        grid.append (row)
        for (let j = 0; j < size; j = j+1){
            const cell = document.createElement("td")
            cell.innerHTML = "abcdefghijklmnopqrstuvwxyz".split("")[Math.floor(Math.random()*26)]
            cell.classList.add("x"+j)
             cell.classList.add("x"+(j-size))
            cell.dataset.x = j
            cell.dataset.y = i
            row.append(cell)
        }
    }
    let clicked = null
    grid.addEventListener("mousedown",function(event){
        console.log(event.target)
        if (event.target.nodeName !== "TD") return
        if (clicked != null){
            clicked.classList.remove("clicked")
            clicked = null
            const letters = []
            document.querySelectorAll(".between").forEach(function(cell){
                letters.push(cell.innerHTML)
            })
            console.log(letters)
            const ans = letters.join("")
            const rans = letters.reverse().join("")
            document.querySelectorAll(".hint").forEach(function(el){
                const answer = el.dataset.ans
                if (answer === ans || answer === rans){
                    el.classList.add("done")
                    document.querySelectorAll(".between").forEach(function(cell){
                        cell.classList.add("found")
                        cell.classList.remove("between")
                    })
                }
            })
        } else {
            clicked = event.target
            event.target.classList.add("clicked")
            document.querySelectorAll(".between").forEach(function(cell){
                cell.classList.remove("between")
                })
            event.target.classList.add("between")


        }
    })
    let hover = null
    grid.addEventListener("mouseover",function(event){
        if (event.target.nodeName !== "TD") return
        hover = event.target
        event.target.classList.add("hovering")
        if (clicked != null){
            document.querySelectorAll(".between").forEach(function(cell){
                cell.classList.remove("between")
            })
            console.log(hover.dataset.x)
            const cx = +clicked.dataset.x
            const cy = +clicked.dataset.y
            const hy = +hover.dataset.y
            const hx = +hover.dataset.x
            let dx = hx - cx
            let dy = hy - cy
            const distx = Math.abs(hx - cx)
            const disty = Math.abs(hy - cy)
            if (dx > 0) {
                dx = 1
            }else if (dx < 0){
                dx = -1
            }
            if (dy > 0){
                dy = 1
            }else if(dy < 0){
                dy = -1
            }
            console.log(dx,dy)
            const cells = []
            let i = 0
            while(true){
                cells.push(document.querySelector(`.y${cy+i*dy} > .x${cx+i*dx}`))
                i = i + 1
                if (i > size || (disty === 0 && distx === 0) || (disty != 0 && i > disty) || (distx != 0 && i > distx) ){
                    break
                }
            }
            cells.forEach(function(cell){
                cell.classList.add("between")
            })
        }
        })
    grid.addEventListener("mouseout",function(event){
        if (event.target.nodeName !== "TD") return
        hover = null
        event.target.classList.remove("hovering")

    })

    function placeword(hint, answer){
        const dir = getDir()
        console.log(dir)
        const start = getStart(dir,size,answer.length)
        console.log(start)
        const cells = []
        for (let j = 0; j < answer.length; j = j+1){
            const cell = document.querySelector(".y"+(start[1]+dir[1]*j)+"> .x"+(start[0]+dir[0]*j))
            cells.push(cell)
        }
        console.log(cells)
        if (cells.some(function (el) {return el.classList.contains("correct")})){
            return placeword(hint, answer)
        }
        cells.forEach(function (cell,i){
            cell.innerHTML = answer[i]
            cell.classList.add("correct")
        })
    }
    wholePuzzle.forEach(function ({hint,answer}){
        placeword(hint, answer)
    })
    guess.addEventListener("change", function( event ){
        console.log(event.target.value) 
        output.append(HTML("<div>"+event.target.value+"</div>"))              
        if (event.target.value === puzzle.answer){alert ("CORRECT")}
        event.target.value = "" 
    })
    function HTML (html){
        const div = document.createElement("div")
        div.innerHTML = html
        return div.firstChild
    }
function getDir(){
    return [[-1,-1],[-1,0],[-1,1],[0,1],[0,-1],[1,1],[1,0],[1,-1]][Math.floor(Math.random()*8)]
}
function getStart(dir,size,len){
    const x = Math.floor(Math.random()*(dir[0] === 0 ? size : (size - len)*dir[0]))
    const y = Math.floor(Math.random()*(dir[1] === 0 ? size : (size - len)*dir[1]))
    return [x,y]
}
</script>